<script src="https://unpkg.com/blockly/blockly.min.js"></script>
<div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
<button id="myButton" onclick="run()">GO</button>
<div id="console"></div>
<style>/* Button */
/* Button */
#myButton{
 background-image:url("flag_circle_FILL1_wght400_GRAD0_opsz48.svg");
 padding-right:15px;
 border-style:none;
 padding-left:15px;
 padding-top:15px;
 padding-bottom:15px;
 transform:translatex(551px) translatey(-480px);
 color:rgba(0,0,0,0);
 background-color:rgba(240,240,240,0);
 background-size:auto;
}

  </style>
<script>
// Get the console element
const consoleElem = document.getElementById('console');
console.log(consoleElem)

// Function to log a message to the console
function logToConsole(message) {
  // Create a new paragraph element with the message
  const newMessage = document.createElement('p');
  newMessage.textContent = message;
  console.log(newMessage)
  // Append the new element to the console
  consoleElem.appendChild(newMessage);
}
function clearLog() {
    const consoleElem = document.getElementById('console');
    consoleElem.innerHTML = '';
}
logToConsole("hello world");

Blockly.defineBlocksWithJsonArray([{
  "type": "string_length",
  "message0": 'length of %1',
  "args0": [
    {
      "type": "input_value",
      "name": "VALUE",
      "check": "String"
    }
  ],
  "output": "Number",
  "colour": 160,
  "tooltip": "Returns number of letters in the provided text.",
  "helpUrl": "http://www.w3schools.com/jsref/jsref_length_string.asp"
},
{
  "type": "lolz",
  "message0": "%1",
  "args0": [
    {
      "type": "field_checkbox",
      "name": "NAME",
      "checked": true
    }
  ],
  "colour": 210,
  "tooltip": "",
  "helpUrl": ""
},
{
  "type": "blok_normal",
  "message0": "%1 %2 %3 %4 %5",
  "args0": [
    {
      "type": "field_label_serializable",
      "name": "01",
      "text": ""
    },
    {
      "type": "field_input",
      "name": "02",
      "text": "default"
    },
    {
      "type": "field_angle",
      "name": "03",
      "angle": 90
    },
    {
      "type": "field_dropdown",
      "name": "04",
      "options": [
        [
          "option1",
          "OPTIONNAME"
        ],
        [
          "option2",
          "OPTIONNAME2"
        ],
        [
          "option3",
          "OPTIONNAME3"
        ]
      ]
    },
    {
      "type": "field_checkbox",
      "name": "05",
      "checked": true
    }
  ],
  "previousStatement": null,
  "nextStatement": null,
  "colour": 230,
  "tooltip": "",
  "helpUrl": ""
},
{
  "type": "alert",
  "message0": "Alert %1",
  "args0": [
  {
      "type": "field_input",
      "name": "NAME",
      "text": "Alert!"
    }
  ],
  "inputsInline": true,
  "previousStatement": null,
  "nextStatement": null,
  "colour": "#5abb37",
  "tooltip": "",
  "helpUrl": ""
},
{
  "type": "prompt",
  "message0": "Prompt %1",
  "args0": [
  {
      "type": "field_input",
      "name": "NAME",
      "text": "Prompt?"
    }
  ],
  "inputsInline": true,
  "previousStatement": null,
  "nextStatement": null,
  "colour": "#5abb37",
  "tooltip": "",
  "helpUrl": ""
},
{
  "type": "confirm",
  "message0": "Confirm %1",
  "args0": [
  {
      "type": "field_input",
      "name": "NAME",
      "text": "Confirm?"
    }
  ],
  "inputsInline": true,
  "previousStatement": null,
  "nextStatement": null,
  "colour": "#5abb37",
  "tooltip": "",
  "helpUrl": ""
},
{
  "type": "log",
  "message0": "Log %1",
  "args0": [
  {
      "type": "field_input",
      "name": "NAME",
      "text": "Log!"
    }
  ],
  "inputsInline": true,
  "previousStatement": null,
  "nextStatement": null,
  "colour": "#5abb37",
  "tooltip": "",
  "helpUrl": ""
},
{
  "type": "go_click",
  "message0": "%1",
  "args0": [
    {
      "type": "field_image",
      "src": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' height='48' viewBox='0 -960 960 960' width='48'%3E%3Cpath d='M229.825-120Q217-120 208.5-128.625T200-150v-620q0-12.75 8.625-21.375T230-800h289q10.5 0 18.75 6.5T548-776l14 62h208q12.75 0 21.375 8.625T800-684v310q0 12.75-8.625 21.375T770-344H568q-10.5 0-18.75-6.5T539-367l-14-62H260v279q0 12.75-8.675 21.375-8.676 8.625-21.5 8.625Z'/%3E%3C/svg%3E",
      "width": 20,
      "height": 20,
      "alt": "*",
      "flipRtl": false
    }
  ],
  "nextStatement": null,
  "colour": "#ee7d16",
  "tooltip": "",
  "helpUrl": ""
},
{
  "type": "ifelse",
  "message0": "if %1 do %2",
  "args0": [
    {
      "type": "input_value",
      "name": "iffy"
    },
    {
      "type": "input_statement",
      "name": "elsey"
    }
  ],
  "inputsInline": false,
  "previousStatement": null,
  "nextStatement": null,
  "colour": "#cc5b22",
  "tooltip": "",
  "helpUrl": ""
}]);

const toolbox = {
  "kind": "categoryToolbox",
  "contents": [
    {
  "kind": "category",
  "name": "Events",
  'colour':'#ee7d16',

  "contents": [
    {
      "kind": "block",
      "type": "go_click"
    }
  ]
},
    {
      "kind": "category",
      "name": "Control",
      'colour':'#cc5b22',
      "contents": [
        {
          "kind": "block",
          "type": "controls_if"
        },
    {
      "kind": "block",
      "type": "ifelse"
    }
      ]
    },
    {
      "kind": "category",
      "name": "Output",
      'colour':'#5abb37',
            "contents": [
        {
          "kind": "block",
          "type": "alert", 
        },
        {
          "kind": "block",
          "type": "prompt", 
        },
        {
          "kind": "block",
          "type": "confirm", 
        },
        {
          "kind": "block",
          "type": "log", 
        },
      ]
    },
    {
      "kind": "category",
      "name": "Operator",
      'colour': '#4a6cd4',
      "contents": [
        {
          "kind": "block",
          "type": "logic_compare"
        },
        {
          "kind": "block",
          "type": "logic_operation"
        },
        {
          "kind": "block",
          "type": "logic_boolean"
        },
        {
          "kind": "block",
          "type": "text"
        },
        {
      "kind": "block",
      "type": "math_number"
    },
    {
      "kind": "block",
      "type": "string_length"
    }
      ]
    },
    {
  "kind": "category",
  "name": "Testing",
  "contents": [
    {
      "kind": "block",
      "type": "lolz"
    },
    {
      "kind": "block",
      "type": "blok_normal"
    }
  ]
}
  ]
}
Blockly.JavaScript['alert'] = function(block) {
  var text_name = block.getFieldValue('NAME');
  var code = '...;\n';
  alert(text_name);
  return code;
};
Blockly.JavaScript['prompt'] = function(block) {
  var text_name = block.getFieldValue('NAME');
  var code = '...;\n';
  prompt(text_name);
  return code;
};
Blockly.JavaScript['confirm'] = function(block) {
  var text_name = block.getFieldValue('NAME');
  var code = '...;\n';
  confirm(text_name);
  return code;
};
Blockly.JavaScript['log'] = function(block) {
  var text_name = block.getFieldValue('NAME');
  var code = '...;\n';
  logToConsole(text_name);
  return code;
};
Blockly.JavaScript['go_click'] = function(block) {
  var nextBlock = block.getNextBlock();
  while (nextBlock) {
    var code = Blockly.JavaScript[nextBlock.type](nextBlock);
    nextBlock = nextBlock.getNextBlock();
  }
};
Blockly.JavaScript['ifelse'] = function(block) {
  var value_iffy = Blockly.JavaScript.valueToCode(block, 'iffy', Blockly.JavaScript.ORDER_NONE);
  console.log(value_iffy)
  var statements_elsey = Blockly.JavaScript.statementToCode(block, 'elsey');
  console.log(statements_elsey)
  var code = 'if (' + value_iffy + ') {\n' + statements_elsey + '}';
  console.log(code)
  return code;
};
  var run = function(){
    Blockly.JavaScript.addReservedWords('code');
    var code = Blockly.JavaScript.workspaceToCode(workspace);
}
const workspace = Blockly.inject('blocklyDiv', {toolbox: toolbox}, {renderer: 'zelos'});
var block = workspace.newBlock('go_click');
var two = workspace.newBlock('log');
block.nextConnection.connect(two.previousConnection);
  workspace.getFlyout().hide();
  block.initSvg()
  two.initSvg()
  workspace.render()
 </script>